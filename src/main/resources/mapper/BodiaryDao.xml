<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.or.bodiary.myBodiary.dao.BodiaryDao">
	<!-- <select id="getUser" resultType="kr.or.bodiary.user.dto.userDTO">
		select user_email, role_seq, user_pwd, user_nickname, user_gender, user_age, user_height, user_weight, user_img, user_reportedcount 
		from user where user_email = #{user_email}
	</select> -->
	
	
	<insert id="insertMealCart">
		insert into mealcart values()
	</insert>
	
	
	
	<insert id="writeDailyMeal" parameterType="map">
		<selectKey order="BEFORE" keyProperty="meal_cart_seq" resultType="String">
     		select max(meal_cart_seq) from mealcart
     	</selectKey>
		insert into dailymeal(food_seq, meal_seq, meal_cart_seq)
		values
     	<foreach collection="list" index="key" item="value" separator=",">
     		(#{value} , #{key}, #{meal_cart_seq})
     	</foreach>	
	</insert>
	
	<select id="foodNameSearch" parameterType="String" resultType="kr.or.bodiary.myBodiary.dto.FoodDto">
		select food_seq, food_name, food_cal from food where food_name like concat('%', #{food_name}, '%')
	</select>
	
</mapper>