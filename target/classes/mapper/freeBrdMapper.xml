<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.or.bodiary.freeBrd.dao.FreeBrdDao">

	
	   <!-- 전체게시글 가져오는 쿼리문 -->
	   <select id="allFreeBrd"  resultType="kr.or.bodiary.freeBrd.dto.FreeBrdDto">
	   				SELECT *
	   				FROM freeboard					
	   </select>
	   
	   <!-- 게시글 상세보기 쿼리문 -->
	   <select id="freebrdDetail"  resultType="kr.or.bodiary.freeBrd.dto.FreeBrdDto">
			    SELECT freeboard.free_brd_seq,freeboard.free_cat,freeboard.user_email,freeboard.free_brd_title,freeboard.free_brd_image,freeboard.free_brd_content,freeboard.free_brd_date,User.user_nickname,User.user_img
				FROM freeboard
				INNER JOIN User
				ON freeboard.user_email = User.user_email
				WHERE freeboard.free_brd_seq=#{free_brd_seq}						
	   </select>
	  
	   <!-- 게시글 Insert 쿼리문 -->
	   <select id="freeBrdInsert"  parameterType="kr.or.bodiary.freeBrd.dto.FreeBrdDto">
	   			INSERT INTO freeboard(free_cat,user_email,free_brd_title,free_brd_image,free_brd_content,free_brd_date) 
	     		VALUES(#{free_cat},'bit155@naver.com',#{free_brd_title},#{free_brd_image},#{free_brd_content},NOW())     									
	   </select>

	   <!-- 글쓰기후 생성된 글번호(가장큰) 가져오기 -->
	   <select id="afterInsert_SelectDetail"  resultType="int">
	   				select max(free_brd_seq)
					from freeboard;			
	   </select>
	   
	   <!-- 게시글 Update 쿼리문 -->
	   <select id="freeBrdUpdate"  parameterType="kr.or.bodiary.freeBrd.dto.FreeBrdDto">
	   			UPDATE freeboard 
	   			SET free_cat=#{free_cat},free_brd_title=#{free_brd_title},free_brd_image=#{free_brd_image},free_brd_content=#{free_brd_content}
	   			WHERE free_brd_seq=#{free_brd_seq}    									
	   </select>
	   
	   <!-- 게시글 Delete 쿼리문 -->
	   <select id="freeBrdDelete">
	   			DELETE 
	   			FROM freeboard
	   			WHERE free_brd_seq=#{seq}    									
	   </select>
	   
</mapper>




